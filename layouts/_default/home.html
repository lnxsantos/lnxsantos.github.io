{{ define "main" }}
<main id="main-content" role="main">
  <div class="container" lang="pt-BR">
    <section class="home-posts" role="region">
      <div class="articles-list" aria-live="polite">
        {{ $posts := where (where .Site.RegularPages "Section" "posts") ".Draft" false }}
        {{ if $posts }}
          {{ range $index, $post := $posts }}
            <article class="article-item" itemscope itemtype="https://schema.org/BlogPosting" aria-labelledby="post-title-{{ $index }}">
              <header class="article-meta">
                <time datetime="{{ $post.Date.Format "2006-01-02" }}" class="article-date" itemprop="datePublished">{{ $post.Date.Format "2006-01-02" }}</time>
              </header>

              <div class="article-body">
                <h2 id="post-title-{{ $index }}" class="article-title" itemprop="headline">
                  <a href="{{ $post.Permalink }}" class="article-link" itemprop="url">{{ $post.Title }}</a>
                </h2>

                <!-- resumo: prioriza .Params.excerpt, senão .Summary, senão truncamento simples -->
                <p class="article-excerpt" itemprop="description">
                  {{ if $post.Params.excerpt }}
                    {{ $post.Params.excerpt }}
                  {{ else if $post.Summary }}
                    {{ $post.Summary | plainify | safeHTML }}
                  {{ else if $post.Content }}
                    {{ $post.Content | plainify | truncate 120 }}
                  {{ end }}
                </p>

                <p class="article-read">
                  <a href="{{ $post.Permalink }}" class="read-more" aria-label="Ler {{ $post.Title }}">Ler mais →</a>
                </p>
              </div>
            </article>
          {{ end }}
        {{ else }}
          <p class="home-empty-state">Nenhuma documentação disponível no momento.</p>
        {{ end }}
      </div>
    </section>

  </div>
</main>
{{ end }}
