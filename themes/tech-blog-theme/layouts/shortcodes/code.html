{{- $lang := .Get "lang" | default "" | lower | replaceRE "[^a-z0-9-]" "" -}}
{{- $title := .Get "title" | default "" | htmlEscape | truncate 100 -}}
{{- $allowedLangs := slice "bash" "sh" "python" "js" "javascript" "html" "css" "json" "yaml" "toml" "go" "rust" "java" "cpp" "c" "php" "ruby" "sql" -}}
{{- if and $lang (not (in $allowedLangs $lang)) -}}
    {{- $lang = "" -}}
{{- end -}}
<div class="terminal-wrapper">
    <div class="terminal-header">
        <div class="terminal-controls">
            <span class="terminal-dot terminal-dot-close"></span>
            <span class="terminal-dot terminal-dot-minimize"></span>
            <span class="terminal-dot terminal-dot-maximize"></span>
        </div>
        <div class="terminal-title">
            {{- if $title -}}
                {{- $title -}}
            {{- else if $lang -}}
                {{- $lang | upper }} Terminal
            {{- else -}}
                Terminal
            {{- end -}}
        </div>
        <div class="terminal-actions"></div>
    </div>
    <div class="terminal-body">
        {{- if $lang -}}
        <pre class="terminal-pre"><code class="language-{{ $lang }}">{{ .Inner | htmlEscape }}</code></pre>
        {{- else -}}
        <pre class="terminal-pre"><code>{{ .Inner | htmlEscape }}</code></pre>
        {{- end -}}
    </div>
</div>

